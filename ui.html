<!DOCTYPE html>
<html>
  <head>
    <style>
      body { font-family: sans-serif; padding: 16px; }
      textarea {
        width: 100%;
        height: 300px;
        font-family: monospace;
        border: 2px solid orange;
        padding: 10px;
        resize: vertical;
      }
    </style>
  </head>
  <body>
    <h2><b>Tabby UX Checker</b></h2>
    <p>Below is the response from the GPT model:</p>
    <textarea readonly id="output">Loading...</textarea>
    <script>
      window.onmessage = (event) => {
        const textarea = document.getElementById("output");
        if (typeof event.data === "string") {
          textarea.value = event.data;
        } else if (event.data?.result) {
          textarea.value = event.data.result;
        } else {
          textarea.value = JSON.stringify(event.data, null, 2);
        }
      };

      parent.postMessage({ pluginMessage: { type: 'analyze' } }, '*');
    </script>
  </body>
</html>